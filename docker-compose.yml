# Because some of our docker-containers have shared libraries, we need to specify
# the build context when creating. Although running from docker-compose doesn't work
# it is still a convenient way to build our containers in the correct contexts

# ~~ DOCKER COMPOSE BUILDER CONTAINER ~~

version: "3.7"
services:
  rest:
    build:
      context: .
      dockerfile: rest_api/Dockerfile
    image: gcr.io/vault-159468/rest:0.0.5
  neo4j:
    build:
      context: neo4j
      dockerfile: Dockerfile
    image: gcr.io/vault-159468/neo4j:0.0.9
  webapp:
    build:
      context: web_app
      dockerfile: Dockerfile
    image: gcr.io/vault-159468/web-app:0.0.1
  dashboard-proxy:
    build:
      context: dashboard_proxy
      dockerfile: Dockerfile
    image: gcr.io/vault-159468/oidc-proxy:0.0.4
  dashboard:
    build:
      context: .
      dockerfile: dashboard/Dockerfile
    image: gcr.io/vault-159468/dashboard:0.0.1
  celery:
    build:
      context: .
      dockerfile: celery/Dockerfile
    image: gcr.io/vault-159468/celery:0.0.20
